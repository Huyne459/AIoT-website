<!DOCTYPE html><html><head><head> <!-- Include Meta Tags Here --><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="ie=edge"><meta name="viewport" content="width=device-width, height=device-height, initial-scale=1 user-scalable=no, shrink-to-fit=no"><meta content='#000000' name='theme-color'/><meta name="keywords" content="Site, Template, Theme"><title>Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC</title><!-- Open Graph general (Facebook, Pinterest & Google+) --><meta name="og:title" content="Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC"><meta name="og:description" content="Jekyll is a static site generator. You give it text written in your favorite markup language and it uses layouts to create a static website."><meta name="og:image" content="/img/posts/nvidia-ngc.jpg"><meta name="og:image:alt" content="Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC"><meta name="og:url" content="http://localhost:4000/blog/nvidia-ngc-docker"><meta name="article:author" content="https://www.facebook.com/pail.lab"><meta name="og:site_name" content="Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC"><meta name="og:type" content="website"> <!-- Twitter --><meta property="twitter:card" content="summary_large_image"/><meta name="twitter:title" content="Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC"><meta name="twitter:description" content="Jekyll is a static site generator. You give it text written in your favorite markup language and it uses layouts to create a static website."><meta name="twitter:site" content="@"><meta name="twitter:creator" content="@"><meta name="twitter:image:src" content="/img/posts/nvidia-ngc.jpg"> <!-- Search Engine --><meta name="description" content="Jekyll is a static site generator. You give it text written in your favorite markup language and it uses layouts to create a static website."><meta name="image" content="/img/posts/nvidia-ngc.jpg"> <!-- Schema.org for Google --><meta itemprop="name" content="Phenikaa AI Lab | Chuỗi hướng dẫn về NVIDIA NGC"><meta name="author" content="AIoT"/><meta itemprop="description" content="Jekyll is a static site generator. You give it text written in your favorite markup language and it uses layouts to create a static website."><meta itemprop="image" content="/img/posts/nvidia-ngc.jpg"> <!-- Global site tag (gtag.js) - Google Analytics --> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-163806439-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag('js', new Date()); gtag('config', 'UA-163806439-1'); </script><title>Phenikaa AI Lab</title><link rel="stylesheet" href="/assets/css/style.css"> <script src="https://kit.fontawesome.com/6a97161b76.js" crossorigin="anonymous"></script><link rel="shortcut icon" href="http://localhost:4000/assets/images/logo.png" type="image/x-icon"></head></head><body><nav class="navbar is-black is-fixed-top" role="navigation" aria-label="main navigation" id="navbar"><div class="container"> <!-- logo or branding image on left side --><div class="navbar-brand"> <a class="navbar-item" href="http://localhost:4000/"> <!-- <strong>Phenikaa AI Lab</strong> --> <img src='https://scontent.fhan19-1.fna.fbcdn.net/v/t1.15752-9/292714853_1938639683192584_6662020547836813844_n.png?_nc_cat=100&ccb=1-7&_nc_sid=ae9488&_nc_ohc=HjpEIucuLOcAX-8wMbt&tn=CBgCmg6DpGWz-opu&_nc_ht=scontent.fhan19-1.fna&oh=03_AVKQ88zgclOL5OeXftUgL3LepQfKKJjo_KZe8Gf9xACgow&oe=6305AA86', alt="Logo lab"> </a><div class="navbar-burger" data-target="navbar-menu"> <span></span> <span></span> <span></span></div></div><!-- children of navbar-menu must be navbar-start and/or navbar-end --><div class="navbar-menu has-background-black" id="navbar-menu"> <!-- navbar items | left side --> <!--<div class="navbar-start"></div>--> <!-- navbar items | right side --><div class="navbar-end"> <a class="navbar-item " href="http://localhost:4000/">HOME</a> <a class="navbar-item" href="http://localhost:4000/#about">ABOUT</a> <a class="navbar-item" href="http://localhost:4000/#contact">CONTACT</a> <a class="navbar-item " href="http://localhost:4000/blog">BLOG</a><div class="navbar-item has-dropdown is-hoverable"> <a class="navbar-link"> MORE </a><div class="navbar-dropdown has-background-black is-left"> <a class="navbar-item has-text-grey-light" href="http://localhost:4000/members">Members</a> <a class="navbar-item has-text-grey-light" href="http://localhost:4000/project">Projects</a> <!-- <a href="http://localhost:4000/members" class="navbar-item has-text-grey-light "> </a> <a href="http://localhost:4000/project" class="navbar-item has-text-grey-light "> Projects </a> <a href="http://localhost:4000/test-page" class="navbar-item has-text-grey-light "> Test Page 123456 </a> --> <!--<hr class="navbar-divider"> <a class="navbar-item"> Report an issue </a> --></div></div></div></div></div></nav><!-- Bulma Navbar JS --> <script> document.addEventListener('DOMContentLoaded', function () { /* Get all "navbar-burger" elements */ var $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0); /* Check if there are any navbar burgers */ if ($navbarBurgers.length > 0) { /* Add a click event on each of them */ $navbarBurgers.forEach(function ($el) { $el.addEventListener('click', function () { /* Get the target from the "data-target" attribute */ var target = $el.dataset.target; var $target = document.getElementById(target); /* Toggle the class on both the "navbar-burger" and the "navbar-menu" */ $el.classList.toggle('is-active'); $target.classList.toggle('is-active'); }); }); } }); </script><section class="hero is-fullheight has-text-centered" id="post"><div class="hero-body"><div class="container"> <a href="/blog/nvidia-ngc-docker" class="has-text-black" id="title"><h1 class="title has-text-centered is-2 has-text-weight-semibold ">Chuỗi hướng dẫn về NVIDIA NGC</h1></a><hr class="has-background-black"><div class="columns is-variable is-5"><div class="column is-6"><figure class="image is-16by9 has-shadow"> <img src="/img/posts/nvidia-ngc.jpg" alt="" id="post-image"></figure></div><div class="subtitle column is-5 has-text-left-desktop has-text-left-fullhd has-text-left-tablet has-text-center-mobile"><p id="description" class="content is-small has-text-weight-medium is-uppercase">Chạy Docker Container sử dụng Nvidia-Container-Toolkit trên Ubuntu</p><p class="subtitle is-6 is-uppercase has-text-weight-normal has-text-black-ter">Published on <b>September 01, 2021</b> by <b><b class="author">Mai Xuan Trang</b> </b></p><p class="subtitle is-uppercase"> <i class="fas fa-tags"></i> <span class="tag is-link">jekyll</span> <span class="tag is-link">informative</span> <span class="tag is-link">technology</span></p><p class="subtitle is-uppercase"><i class="fas fa-clock"></i> <b class="has-text-link"> 5 min </b>READ</p></div></div><div class="content has-text-justified-desktop has-text-justified-fullhd has-text-justified has-text-justified-tablet has-text-left-mobile"><p><p>Khi đọc báo tôi thường hay phải chạy lại các thí nghiệm (code) của các bài báo đó. Code cung cấp bởi các tác giả thường cũ và không được cập nhật. Tác giả thông thường cũng không viết chi tiết hoặc có rất it thông tin về môi trường họ chạy code. Việc tìm kiếm và cài đặt được các thư viện cho đúng để chạy được code thực sự là một ác mộng. Đặc biệt là khi chạy các mô hình học sâu trên NVIDIA GPU, việc cài đặt đúng phiên bản CUDA, đúng CUDA driver và đúng phiên bản các frameworks (Pytorch, Tensorflow, …) là công việc tốn rất nhiều thời gian. Chưa kể đến việc cài đặt lại trên môi trường máy chủ lại có thể gây ảnh hưởng đến người khác.</p><p>Tôi ghi chú ra đây phương pháp sử dụng Docker và NVIDIA NGC để chạy các docker images phù hợp với yêu cầu của mình cho từng dự án.</p><p>Các bước tôi thường thực hiện để sử dụng Docker vàn NVIDIA NGC như sau:</p><h3 id="bước-1-cài-đặt-docker-và-nvidia-container-toolkit">Bước 1: Cài đặt Docker và nvidia-container-toolkit</h3><p>Trên Ubuntu terminal chạy lệnh sau đây để cài đặt Docker và nvidia-container-toolkit:</p><p><code class="language-plaintext highlighter-rouge">&gt; sudo apt-get install -y docker.io nvidia-container-toolkit</code></p><p>Sau khi cài đặt xong bạn có thể kiểm tra docker có chạy đúng hay không bằng cách chạy lệnh:</p><p><code class="language-plaintext highlighter-rouge">&gt; sudo systemctl status docker</code></p><p>Nếu docker đang chạy lỗi, hoặc không active bạn có thể restart lại docker như sau:</p><p><code class="language-plaintext highlighter-rouge">&gt; sudo systemctl daemon-reload</code> <code class="language-plaintext highlighter-rouge">&gt; sudo systemctl restart docker</code></p><h3 id="bước-2-lấy-container-từ-nvidia-ngc-về">Bước 2: Lấy container từ NVIDIA NGC về</h3><p>NVIDIA NGC là một private docker registry, bạn muốn tải container từ NGC về trước hết cần tạo tài khoản trên NGC và login vào tài khoản với ‘<code class="language-plaintext highlighter-rouge">docker login</code>’ như hướng dẫn sau: <a href="https://docs.nvidia.com/dgx/ngc-registry-for-dgx-user-guide/index.html">NGC User Guide</a>.</p><p>Sau khi đăng ký tài khoản, và đăng nhập bạn có thể vào <a href="https://ngc.nvidia.com/catalog">NGC Catalog</a> để tìm hiểu và lựa chọn container phu hợp với yêu cầu của mình.</p><p>Sau khi chon được container phù hợp, bạn chạy lệnh sau đây để tải container về:</p><p><code class="language-plaintext highlighter-rouge">&gt; sudo docker pull nvcr.io/nvidia/pytorch:21.08-py3</code></p><p>Lệnh này sẽ tải về docker một container đã được cài đặt sẵn các thư viện, framework, drivers cần thiết. Ví dụ thông tin môi trường của container trong lệnh trên bạn có thể tìm thấy ở đây: <a href="https://docs.nvidia.com/deeplearning/frameworks/pytorch-release-notes/rel_21-08.html#rel_21-08">Pytorch Release 21.08</a></p><h3 id="bước-3-chạy-docker-với-interactive-mode">Bước 3: Chạy docker với interactive mode</h3><p>Sau khi tải container về rồi, bạn có thể khởi tạo một “interactive session” để chạy và làm việc với container như sau:</p><p><code class="language-plaintext highlighter-rouge">sudo docker run --gpus all -it --rm -v `pwd`/codes:/codes/ nvcr.io/nvidia/pytorch:21.08-py3</code></p><p>Lệnh này sẽ khởi chạy container và gắn thư mục <code class="language-plaintext highlighter-rouge">codes</code> ở thư mục hiện tại trên máy của bạn với thư mục <code class="language-plaintext highlighter-rouge">/codes</code> trên container. (dữ liệu được chia sẽ giữa máy chủ và container).</p><p>Chi tiết hơn về các cờ khi chạy lệnh này bạn có thể xem chi tiết hơn trên: <a href="https://ngc.nvidia.com/catalog/containers/nvidia:pytorch">NGC Container</a></p><h3 id="thats-it-enjoy-running-you-code-on-the-container">That’s it: Enjoy running you code on the container</h3><p>Bạn đã thành công tải và chạy một GPU docker container từ NVIDA NGC. Việc dùng docker này giup bạn giảm nhiều thời gian trong việc tìm kiếm và cài đặt các thư viện, framworks để chạy code.</p></p></div><div class="disqus-comments" id="disqus_thread"></div><div class="clearfix"> <a class="btn btn-primary float-left" href="/blog/machine-learning-intro" data-toggle="tooltip" data-placement="top" title="Machine Learning là gì?">&larr; Previous<span class="d-none d-md-inline"> Post</span></a> <a class="btn btn-primary float-right" href="/blog/nvidia-dli-deep-learning-fundamentals" data-toggle="tooltip" data-placement="top" title="DLI: Instructor-led Workshop">Next<span class="d-none d-md-inline"> Post</span> &rarr;</a></div></div></div></section><footer id="footer"> <!--Footer Button--><div class="container has-text-centered has-background-grey-darker" id="backtotop"> <a class="has-text-white" onclick="window.scroll(0,0)">BACK TO TOP</a></div><!--Footer Main Section--><div class="has-background-grey-darker"><div class="container columns"> <!--Name Section--><div class="column has-text-left-desktop has-text-centered-mobile"> <a href="http://localhost:4000/#about"><div class="columns"><div class="column is-one-fifth-desktop is-one-fifth-fullhd is-one-quarter-tablet"> <img class="" src="https://scontent.fhan19-1.fna.fbcdn.net/v/t1.15752-9/292714853_1938639683192584_6662020547836813844_n.png?_nc_cat=100&ccb=1-7&_nc_sid=ae9488&_nc_ohc=HjpEIucuLOcAX-8wMbt&tn=CBgCmg6DpGWz-opu&_nc_ht=scontent.fhan19-1.fna&oh=03_AVKQ88zgclOL5OeXftUgL3LepQfKKJjo_KZe8Gf9xACgow&oe=6305AA86"></div><div class="column is-marginless"><h5 class="has-text-grey-lighter">AIoT</h5><div class="content has-text-grey"><p>Tại đây sẽ viết 1 số thông tin ngắn giới thiệu về AOiT lab</p></div></div></div></a></div><!--Link Section --><div class="column has-text-white"><h3>More Links</h3><li> <a href="http://localhost:4000/project">Projects</a></li><li> <a href="http://localhost:4000/members">Members</a></li></div><!--Blog-post Section--><div class="column has-text-white"><h3>Recent Posts</h3><li> <a href="http://localhost:4000/blog/nvidia-dli-deep-learning-fundamentals">DLI: Instructor-led Workshop</a></li><li> <a href="http://localhost:4000/blog/nvidia-ngc-docker">Chuỗi hướng dẫn về NVIDIA NGC</a></li><li> <a href="http://localhost:4000/blog/machine-learning-intro">Machine Learning là gì?</a></li></div></div></div><div class="has-background-black has-text-centered has-text-white" id="credits"> <i class="far fa-copyright"></i> 2022 | <a href="https://github.com/thedevslot/WhatATheme" target="_blank" rel="noopener noreferrer">AIoT Site</a> - A website with <i class="fas fa-heart has-text-danger"></i> by <a href="https://www.facebook.com/pail.lab" target="_blank" rel="noopener noreferrer">AIoT lab</a> Powered by <a href="https://jekyllrb.com/" target="_blank">Jekyll</a></div></footer></body><script> /** * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS. * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/ /* var disqus_config = function () { this.page.url = PAGE_URL; Replace PAGE_URL with your page's canonical URL variable this.page.identifier = PAGE_IDENTIFIER; Replace PAGE_IDENTIFIER with your page's unique identifier variable }; */ (function () { /* DON'T EDIT BELOW THIS LINE */ var d = document, s = d.createElement('script'); s.src = 'https://thedevslot.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); </script></html>
